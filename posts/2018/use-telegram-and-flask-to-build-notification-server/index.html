<!DOCTYPE html>
<html lang="en-US" class="has-navbar-fixed-top">

<head>
    <meta name="generator" content="Hugo 0.55.0-DEV" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Use Telegram and Flask to build personal notification server | Tony Xu Blog</title>

     
      
    
    
    
    
    

  <meta name="author" content="Tony Xu">

 
    <meta property="og:title" content="Use Telegram and Flask to build personal notification server" />
<meta property="og:description" content="Imagine if you are in these situations:
 I want to notify my girl friend whenver I leave company or arrive home
 I want to get notified when there is new visit to my website
 I want get notified when a scraper or job finished
  The solution to above situations is a mechanism to send message to your phone programmatically and here is my solution:
Build a Flask app to receive GET or POST request, and then compose different messages according to event type and send to some chat channel such as Telegram or Slack." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2018/use-telegram-and-flask-to-build-notification-server/" />
<meta property="article:published_time" content="2018-07-12T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-07-12T00:00:00&#43;00:00"/><meta property="og:site_name" content="Tony Xu Blog" />
 
    



 
    
     
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-577792-7', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
 
    
    
    <link rel="canonical" href="/posts/2018/use-telegram-and-flask-to-build-notification-server/">   <link rel="shortcut icon" type="image/png" href="profile-pic.png">


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="/css/bulma.css"> 
</head>


<body>
    <header> <nav class="navbar is-fixed-top">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href=/>
        <img src="/profile-pic.png" alt="logo">
      </a>
      <a class="navbar-item" href=/>
        Tony Xu Blog
      </a>
      <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="navMenu">

      
      
      <div class="navbar-end">
        
        <a class="navbar-item" target="blank" href="https://github.com/tonyxu-io">
          <span class="icon">
            <i class="fa fa-github"></i>
          </span>
        </a>
        

        
        <a class="navbar-item" target="blank" href="https://www.linkedin.com/in/tonyxu93">
          <span class="icon">
            <i class="fa fa-linkedin"></i>
          </span>
        </a>
        
        <div class="navbar-item">
          
          
          <a itemprop="url" class="navbar-item "
            href="/about"><span itemprop="name">About</span></a>
          
          <a itemprop="url" class="navbar-item "
            href="/friends/"><span itemprop="name">Friends</span></a>
          
          <a itemprop="url" class="navbar-item  is-active"
            href="/posts/"><span itemprop="name">Posts</span></a>
          
        </div>
        
        <div class="navbar-item">
          <div class="field">
            <div class="control has-icons-left">
              <div class="select is-rounded  is-small">
                <select size="1" name="links" onchange="window.location.href=this.value;">
                  <option selected disabled>Language</option>
                  
                  <option value="/zh/posts/2018/use-telegram-and-flask-to-build-notification-server/">中文</option>
                  
                </select>
              </div>
              <div class="icon is-small is-left">
                <i class="fa fa-globe"></i>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>

</nav> </header>
    <main>

<div class="section">
  <div class="container" itemscope itemtype="http://schema.org/BlogPosting">
    
<meta itemprop="name" content="Use Telegram and Flask to build personal notification server">
<meta itemprop="description" content="Imagine if you are in these situations:
 I want to notify my girl friend whenver I leave company or arrive home
 I want to get notified when there is new visit to my website
 I want get notified when a scraper or job finished
  The solution to above situations is a mechanism to send message to your phone programmatically and here is my solution:
Build a Flask app to receive GET or POST request, and then compose different messages according to event type and send to some chat channel such as Telegram or Slack.">


<meta itemprop="datePublished" content="2018-07-12T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-07-12T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="339">



<meta itemprop="keywords" content="" />

    <div class="columns">
      <div class="column is-8 is-offset-2">
        <p class="title">Use Telegram and Flask to build personal notification server</p>
        <p class="text">
  
  <span>Thu, Jul 12, 2018</span>
  
</p>
        <hr />
        <div class="content">
          <p>Imagine if you are in these situations:</p>

<ol>
<li>I want to notify my girl friend whenver I leave company or arrive home<br /></li>
<li>I want to get notified when there is new visit to my website<br /></li>
<li>I want get notified when a scraper or job finished<br />
<br /></li>
</ol>

<p>The solution to above situations is a mechanism to send message to your phone programmatically and here is my solution:</p>

<p>Build a Flask app to receive GET or POST request, and then compose different messages according to event type and send to some chat channel such as Telegram or Slack. This Flask app can be running in Google App Engine for free, and use your custom domain.</p>

<p>The steps to build this Flask app can be found below:</p>

<ol>
<li>Follow Google App Engine tutorial to build a basic Flask app<br /></li>
<li>Create a Telegram bot in: <a href="https://core.telegram.org/bots#3-how-do-i-create-a-bot">https://core.telegram.org/bots#3-how-do-i-create-a-bot</a><br /></li>
<li>Talk with your bot and get the chat id: <code>https://api.telegram.org/bot$TOKEN/getUpdates</code><br /></li>
<li>Create a route handler in Flask app and make it be able to make GET request to send message like below: <code>https://api.telegram.org/bot$TOKEN/sendMessage?chat_id=12345&amp;text=Hello+World</code><br /></li>
<li>Upload the Flask app to Google App Engine: <code>gcloud app deploy</code><br />
<br /></li>
</ol>

<p>Now you have a Flask app to send you message whenever it gets a HTTP request. The message can be pre-defined or passed to it on the flight.</p>

<p>Back to the situations I talked about at the beginning, how this Flask app can solve the problems?</p>

<ol>
<li>Install IFTTT app on your phone and allow it to monitor your location, create an action to make webhook request to your Flask endpoint whenever you leave a place or arrive a place.<br /></li>
<li>Create a route in Flask app to receive website visit GET request, and then send a message with visitor information (e.g. origin IP) to your Telegram.<br /></li>
<li>When a script/job finished, it can make a request to your Flask app endpoint and it can send you notification to notify you it&rsquo;s completed.<br />
<br /></li>
</ol>

<p>If you don&rsquo;t have additional logic, messages can be directly sent to Telegram channel without Flask app.</p>

<p>This is my Flask app, so for your reference:</p>

<p><a href="https://github.com/tonyxu-io/my-api">https://github.com/tonyxu-io/my-api</a></p>

        </div>
        
        <article>
          <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'tonyxu-io';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>
        
      </div>
    </div>
  </div>
</div>
</main>
    <footer>
<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <p>
        © 2019 Tony Xu
      </p>
    </div>
  </div>
</footer>
</footer>

    <script async type="text/javascript" src="/js/bulma.js"></script>
</body>

</html>