(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{290:function(t,a,s){"use strict";s.r(a);var e=s(47),n=Object(e.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"create-alfred-workflow-for-uploading-screenshot-to-s3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-alfred-workflow-for-uploading-screenshot-to-s3","aria-hidden":"true"}},[t._v("#")]),t._v(" Create Alfred workflow for uploading screenshot to S3")]),t._v(" "),e("p",[t._v("As Markdown markup language gets more and more popular, most people have a need to quickly generate a public url for screenshot/image in clipboard. Today I created an Alfred workflow that helps you upload images/screenshot in clipboard.")]),t._v(" "),e("h2",{attrs:{id:"demo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo","aria-hidden":"true"}},[t._v("#")]),t._v(" Demo")]),t._v(" "),e("p",[e("img",{attrs:{src:s(368),alt:"2018-07-08+21_33_30.gif"}})]),t._v(" "),e("h2",{attrs:{id:"overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),e("ol",[e("li",[t._v("Use "),e("code",[t._v("pngpaste")]),t._v(" to get image data from clipboard")]),t._v(" "),e("li",[t._v("Write to a image file in "),e("code",[t._v("/tmp")]),t._v(" folder")]),t._v(" "),e("li",[t._v("Use "),e("code",[t._v("boto3")]),t._v(" to upload image file to AWS S3")])]),t._v(" "),e("h2",{attrs:{id:"implementation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#implementation","aria-hidden":"true"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),e("p",[t._v("Now we have the idea to achieve the goal, let's do it in Alfred workflow and python script.")]),t._v(" "),e("h3",{attrs:{id:"create-alfred-workflow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-alfred-workflow","aria-hidden":"true"}},[t._v("#")]),t._v(" Create Alfred workflow")]),t._v(" "),e("p",[t._v("Create "),e("code",[t._v("Blank Workflow")]),t._v(" and give it a name")]),t._v(" "),e("p",[t._v("Right click in background and select "),e("code",[t._v("Inputs -> Keyword")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(369),alt:"2018_07_08_20_56_57.png"}})]),t._v(" "),e("p",[t._v("Give it a keyword which you will be typing to trigger the workflow")]),t._v(" "),e("p",[e("img",{attrs:{src:s(370),alt:"2018_07_08_20_50_57.png"}})]),t._v(" "),e("p",[t._v("Right click in background and select "),e("code",[t._v("Actions -> Run Script")])]),t._v(" "),e("p",[t._v("Let's make it use Python to run a script")]),t._v(" "),e("p",[e("img",{attrs:{src:s(371),alt:"2018_07_08_20_58_41.png"}})]),t._v(" "),e("p",[t._v("Click on the icon on the left of "),e("code",[t._v("Cancel")]),t._v(" button to open workflow folder")]),t._v(" "),e("p",[t._v("Create a script file (Make sure the file name is the same as the "),e("code",[t._v("Run Script")]),t._v(" action uses) and edit like below")]),t._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/usr/bin/python")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -*- coding: utf-8 -*-")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" __future__ "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" print_function\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" datetime\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sys\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" atexit\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" imghdr\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" subprocess "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" call\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" expanduser"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" basename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getsize\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" workflow "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Workflow\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("capture")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    file_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" datetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datetime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strftime"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y_%m_%d_%H_%M_%S.png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    file_path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    atexit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lambda")]),t._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    save "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" call"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./pngpaste'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" save "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Quit job if no image found in clipboard")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No image found in clipboard"')]),t._v("\n        sys"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" file_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_name\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" boto3\n    file_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" capture"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    bucket_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bucket_name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    s3 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" boto3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s3'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        aws_access_key_id"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'access_key'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        aws_secret_access_key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret_key'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    s3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bucket_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ExtraArgs"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ContentType'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/png"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    output "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s/%s"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bucket_uri'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("output"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("end"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    wf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Workflow"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("libraries"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sys"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br"),e("span",{staticClass:"line-number"},[t._v("23")]),e("br"),e("span",{staticClass:"line-number"},[t._v("24")]),e("br"),e("span",{staticClass:"line-number"},[t._v("25")]),e("br"),e("span",{staticClass:"line-number"},[t._v("26")]),e("br"),e("span",{staticClass:"line-number"},[t._v("27")]),e("br"),e("span",{staticClass:"line-number"},[t._v("28")]),e("br"),e("span",{staticClass:"line-number"},[t._v("29")]),e("br"),e("span",{staticClass:"line-number"},[t._v("30")]),e("br"),e("span",{staticClass:"line-number"},[t._v("31")]),e("br"),e("span",{staticClass:"line-number"},[t._v("32")]),e("br"),e("span",{staticClass:"line-number"},[t._v("33")]),e("br"),e("span",{staticClass:"line-number"},[t._v("34")]),e("br"),e("span",{staticClass:"line-number"},[t._v("35")]),e("br"),e("span",{staticClass:"line-number"},[t._v("36")]),e("br"),e("span",{staticClass:"line-number"},[t._v("37")]),e("br"),e("span",{staticClass:"line-number"},[t._v("38")]),e("br"),e("span",{staticClass:"line-number"},[t._v("39")]),e("br")])]),e("p",[t._v("This script will return the image public url and let's copy it to clipboard and push a notification.")]),t._v(" "),e("p",[t._v("Right click on the background and select "),e("code",[t._v("Outputs –> Copy to Clipboard")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(372),alt:"2018_07_08_21_06_32.png"}})]),t._v(" "),e("p",[t._v("Right click on the background and select "),e("code",[t._v("Outputs –> Post Notification")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(373),alt:"2018_07_08_21_06_54.png)"}})]),t._v(" "),e("p",[t._v("Now let's connect those boxes like below:")]),t._v(" "),e("p",[e("img",{attrs:{src:s(374),alt:"2018_07_08_21_07_52.png"}})]),t._v(" "),e("h3",{attrs:{id:"include-libraries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#include-libraries","aria-hidden":"true"}},[t._v("#")]),t._v(" Include libraries")]),t._v(" "),e("p",[t._v("In the scripts, we used below libraries and need to be included in the workflow to make sure they can be run without issue")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://alfredworkflow.readthedocs.io/en/latest/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Workflow"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://docs.aws.amazon.com/cli/latest/userguide/installing.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("awscli"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://boto3.readthedocs.io/en/latest/guide/quickstart.html#installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("boto3"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/jcsalterego/pngpaste",target:"_blank",rel:"noopener noreferrer"}},[t._v("pngpaste"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("Install above libraries like below:")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("pip install --target=/path/to/workflow Alfred-Workflow\npip install --target=/path/to/workflow/lib awscli\npip install --target=/path/to/workflow/lib boto3\nbrew install pngpaste\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("Please note that pngpaste is a command line tool and you should copy the binary file to "),e("code",[t._v("/path/to/workflow")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"add-environment-variables"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-environment-variables","aria-hidden":"true"}},[t._v("#")]),t._v(" Add environment variables")]),t._v(" "),e("p",[t._v("In the script, we used below variables that we want to make it configurable instead of hard coded:")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("access_key: S3 access key")])]),t._v(" "),e("li",[e("p",[t._v("secret_key: S3 access secret")])]),t._v(" "),e("li",[e("p",[t._v("bucket_name: S3 bucket name. e.g. "),e("code",[t._v("my-bucket-name")])])]),t._v(" "),e("li",[e("p",[t._v("bucket_uri: S3 bucket URI without trailing slash. e.g. "),e("code",[t._v("https://s3-us-west-1.amazonaws.com/my-bucket-name")])])])]),t._v(" "),e("p",[t._v("Add and config above environment variables into workflow environment variables settings like below")]),t._v(" "),e("p",[e("img",{attrs:{src:s(375),alt:"2018_07_10_20_55_19.png"}})]),t._v(" "),e("p",[t._v("Follow instructions "),e("a",{attrs:{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),e("OutboundLink")],1),t._v(" to create access key and secret if you don't have it already")]),t._v(" "),e("p",[t._v("Make sure the user can read/write to S3 bucket.")]),t._v(" "),e("h2",{attrs:{id:"complete"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#complete","aria-hidden":"true"}},[t._v("#")]),t._v(" Complete")]),t._v(" "),e("p",[t._v("Congratulations You made it! Give it a try!")]),t._v(" "),e("h2",{attrs:{id:"follow-up"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#follow-up","aria-hidden":"true"}},[t._v("#")]),t._v(" Follow-up")]),t._v(" "),e("p",[t._v("Now you may think of adding support for the workflow to be able to upload any image from local. As you are getting familiar with Alfred workflow development, feel free to give it a try!")]),t._v(" "),e("p",[t._v("Download in Github:")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/tonyxu-io/Alfred-Workflow-Upload-S3",target:"_blank",rel:"noopener noreferrer"}},[t._v("tonyxu-io/Alfred-Workflow-Upload-S3"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("References:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://xfyuan.github.io/2017/03/use-alfred-to-auto-upload-screenshot-to-qiniu-and-generate-the-markdown-image-url/",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Alfred workflow 上传截图到七牛并自动生成外链URL"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"http://labmain.com/2016/04/06/A_Alfred_Workflow_upload_clipboard%27image_to_qiniu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alfred Workflow —— 上传剪贴板的图片到七牛"),e("OutboundLink")],1)])])])},[],!1,null,null,null);n.options.__file="README.md";a.default=n.exports},368:function(t,a,s){t.exports=s.p+"assets/img/2018-07-08+21_33_30.62122585.gif"},369:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_20_56_57.730b4a91.png"},370:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_20_50_57.183dcb26.png"},371:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_20_58_41.ec3a9343.png"},372:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_21_06_32.5e73e58d.png"},373:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_21_06_54.58c8e1ab.png"},374:function(t,a,s){t.exports=s.p+"assets/img/2018_07_08_21_07_52.7ad2dab2.png"},375:function(t,a,s){t.exports=s.p+"assets/img/2018_07_10_20_55_19.d56bccf5.png"}}]);