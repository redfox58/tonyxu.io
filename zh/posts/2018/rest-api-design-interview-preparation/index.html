<!doctype html><html lang=en-us class=has-navbar-fixed-top><head><meta name=generator content="Hugo 0.73.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>REST API 设计面试准备 | Tony Xu (徐毅涵) 博客</title><meta name=author content="Tony Xu"><meta itemprop=name content="REST API 设计面试准备"><meta itemprop=description content="现在 REST API 已经越来越流行被用作前后端的借口。大多数平台都提供 REST API 作为兼容 Web 端和移动端通用接口。如果你即将面试一个要求对 REST API 非常熟悉的岗位，我推"><meta itemprop=datePublished content="2018-07-03T00:00:00+00:00"><meta itemprop=dateModified content="2018-07-03T00:00:00+00:00"><meta itemprop=wordCount content="1111"><meta itemprop=image content="https://redfox58.github.io/images/og-image.png"><meta itemprop=keywords content><meta property="og:title" content="REST API 设计面试准备"><meta property="og:description" content="现在 REST API 已经越来越流行被用作前后端的借口。大多数平台都提供 REST API 作为兼容 Web 端和移动端通用接口。如果你即将面试一个要求对 REST API 非常熟悉的岗位，我推"><meta property="og:type" content="article"><meta property="og:url" content="https://redfox58.github.io/tonyxu.io/zh/posts/2018/rest-api-design-interview-preparation/"><meta property="og:image" content="https://redfox58.github.io/images/og-image.png"><meta property="article:published_time" content="2018-07-03T00:00:00+00:00"><meta property="article:modified_time" content="2018-07-03T00:00:00+00:00"><meta property="og:site_name" content="Tony Xu (徐毅涵) 博客"><meta property="og:image" content="https://redfox58.github.io/images/og-image.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://redfox58.github.io/images/og-image.png"><meta name=twitter:title content="REST API 设计面试准备"><meta name=twitter:description content="现在 REST API 已经越来越流行被用作前后端的借口。大多数平台都提供 REST API 作为兼容 Web 端和移动端通用接口。如果你即将面试一个要求对 REST API 非常熟悉的岗位，我推"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-577792-7','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=canonical href=https://redfox58.github.io/tonyxu.io/zh/posts/2018/rest-api-design-interview-preparation/><link rel=apple-touch-icon-precomposed sizes=57x57 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon-precomposed sizes=114x114 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon-precomposed sizes=72x72 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon-precomposed sizes=60x60 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon-precomposed sizes=120x120 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon-precomposed sizes=76x76 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon-precomposed sizes=152x152 href=https://redfox58.github.io/tonyxu.io/images/favicons/apple-touch-icon-152x152.png><link rel=icon type=image/png href=https://redfox58.github.io/tonyxu.io/images/favicons/favicon-196x196.png sizes=196x196><link rel=icon type=image/png href=https://redfox58.github.io/tonyxu.io/images/favicons/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://redfox58.github.io/tonyxu.io/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://redfox58.github.io/tonyxu.io/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://redfox58.github.io/tonyxu.io/images/favicons/favicon-128.png sizes=128x128><meta name=msapplication-TileColor content="#3273dc"><meta name=msapplication-TileImage content="https://redfox58.github.io/tonyxu.io/images/favicons/mstile-144x144.png"><meta name=msapplication-square70x70logo content="https://redfox58.github.io/tonyxu.io/images/favicons/mstile-70x70.png"><meta name=msapplication-square150x150logo content="https://redfox58.github.io/tonyxu.io/images/favicons/mstile-150x150.png"><meta name=msapplication-wide310x150logo content="https://redfox58.github.io/tonyxu.io/images/favicons/mstile-310x150.png"><meta name=msapplication-square310x310logo content="https://redfox58.github.io/tonyxu.io/images/favicons/mstile-310x310.png"><link rel=stylesheet href=/css/bulma.min.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/font.css><script type=text/javascript src=/js/bulma.js></script><link href="https://fonts.googleapis.com/css?family=Ubuntu" rel=stylesheet></head><body><header><nav class="navbar is-fixed-top is-link"><div class=container><div class=navbar-brand><a class=navbar-item href=/tonyxu.io/zh><picture style=height:28px>
<source srcset=/images/square-logo.webp type=image/webp><source srcset=/images/square-logo.png type=image/jpeg><img src=/images/square-logo.png></picture></a>
<a class=navbar-item href=/tonyxu.io/zh>Tony Xu (徐毅涵) 博客</a>
<a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a></div><div class=navbar-menu id=navMenu><div class=navbar-end><a class=navbar-item target=blank href=https://github.com/tonyxu-io><span class=icon><i class=icon-github></i></span></a><a class=navbar-item target=blank href=https://www.linkedin.com/in/tonyxu93><span class=icon><i class=icon-linkedin-square></i></span></a><a class=navbar-item href=/tonyxu.io/zh/search><span class=icon><i class=icon-search></i></span></a><div class=navbar-item><div class=field><div class="control has-icons-left"><div class="select is-rounded is-small"><select size=1 name=links onchange="window.location.href=this.value;">
<option selected disabled>中文</option>
<option value=/tonyxu.io/posts/2018/rest-api-design-interview-preparation/>English</option></select></div><div class="icon is-small is-left has-text-black"><i class=icon-language></i></div></div></div></div></div></div></div></nav></header><main><div class=section><div class=container itemscope itemtype=http://schema.org/BlogPosting><meta itemprop=name content="REST API 设计面试准备"><meta itemprop=description content="现在 REST API 已经越来越流行被用作前后端的借口。大多数平台都提供 REST API 作为兼容 Web 端和移动端通用接口。如果你即将面试一个要求对 REST API 非常熟悉的岗位，我推"><meta itemprop=datePublished content="2018-07-03T00:00:00+00:00"><meta itemprop=dateModified content="2018-07-03T00:00:00+00:00"><meta itemprop=wordCount content="1111"><meta itemprop=image content="https://redfox58.github.io/images/og-image.png"><meta itemprop=keywords content><div class=columns><div class="column is-8 is-offset-2"><div class=columns><div class="column is-8 is-offset-2 has-text-centered"><div class=title><a href=https://redfox58.github.io/tonyxu.io/zh/posts/>文章</a></div><p class=subtitle>对于人生和代码的思考</p></div></div><hr><p class=title>REST API 设计面试准备</p><div class="columns is-mobile is-vcentered"><div class=column><p class=text>Tony Xu</p><p class=text><p class=text>2018-07-03</p></p></div><div class="column has-text-right"><div class="buttons is-right py-0 mb-0"><a class="button is-light mb-0" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fredfox58.github.io%2ftonyxu.io%2fzh%2fposts%2f2018%2frest-api-design-interview-preparation%2f" target=_blank title=分享到Facebook><span class=icon><i class=icon-facebook></i></span></a><a class="button is-light mb-0" href="https://www.linkedin.com/sharing/share-offsite?url=https%3a%2f%2fredfox58.github.io%2ftonyxu.io%2fzh%2fposts%2f2018%2frest-api-design-interview-preparation%2f" target=_blank title=分享到LinkedIn><span class=icon><i class=icon-linkedin></i></span></a><a id=open-qr-code class="button is-light mb-0" href title=生成二维码分享><span class=icon><i class=icon-qrcode></i></span></a></div><div class=modal><div class=modal-background></div><div class=modal-content><p class="image is-1by1"><img src="https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=https%3a%2f%2fredfox58.github.io%2ftonyxu.io%2fzh%2fposts%2f2018%2frest-api-design-interview-preparation%2f&choe=UTF-8" alt></p></div><button class="modal-close is-large" aria-label=close></button></div><script>document.querySelector('a#open-qr-code').addEventListener('click',function(event){event.preventDefault();var modal=document.querySelector('.modal');var html=document.querySelector('html');modal.classList.add('is-active');html.classList.add('is-clipped');modal.querySelector('.modal-background').addEventListener('click',function(e){e.preventDefault();modal.classList.remove('is-active');html.classList.remove('is-clipped');});modal.querySelector('.modal-close').addEventListener('click',function(e){e.preventDefault();modal.classList.remove('is-active');html.classList.remove('is-clipped');});});</script></div></div><div class=content><p>现在 REST API 已经越来越流行被用作前后端的借口。大多数平台都提供 REST API 作为兼容 Web 端和移动端通用接口。如果你即将面试一个要求对 REST API 非常熟悉的岗位，我推荐你多准备 REST API 相关知识。以下是我个人对 REST API 的面试准备。</p><h2 id=设计原则>设计原则</h2><ul><li>自描述</li><li>简单</li><li>安全</li></ul><h2 id=准备>准备</h2><ul><li>确定用户<ul><li>来自内部或者外部</li><li>角色 (开发者, 管理员, 客户, 客服&mldr;)</li></ul></li><li>确定使用场景</li><li>确定需要提供的功能</li><li>分析并确定上述，再开始设计</li></ul><p>注意:</p><ul><li>不要猜想</li><li>不要杜撰</li></ul><h2 id=设计流程>设计流程</h2><ul><li>确定 REST API 要提供对哪些资源的操作</li><li>确定不同资源的关系</li><li>根据资源类型和关系决定资源名的定义方法</li><li>为资源确定必须的操作方法</li></ul><h2 id=接口设计>接口设计</h2><p>设计如何提供资源的操作方法</p><ul><li><p>HTTP 路径</p><ul><li>https://<code>api_domain</code>/<code>version</code>/<code>collection</code>/</li><li>https://<code>api_domain</code>/<code>version</code>/<code>collection</code>/<code>resource</code>/</li><li>https://<code>api_domain</code>: 可以返回基本信息例如 API 版本、所有顶级资源集合，以及所有单个资源</li><li>使用名字作为资源名、而非动词</li></ul></li><li><p>HTTP 方法</p><ul><li><code>GET</code>/<code>POST</code>/<code>PATCH</code>/<code>PUT</code>/<code>DELETE</code></li></ul></li><li><p>请求头</p><ul><li><code>Authorization</code>: Bearer <code>access_token</code></li><li><code>Accept</code>: 要求指定类型的返回</li><li><code>Content-Type</code>: 请求体的类型</li><li>&mldr;</li></ul></li><li><p>请求参数</p><ul><li>Filtering (过滤): <code>type</code>=news,photo&<code>days</code>=sunday</li><li>Sorting (排序): <code>sort</code>=create_time,-creator</li><li>Paging (分页): <code>offset</code>=100&<code>limit</code>=100</li><li>Search/Query (关键词): <code>q</code>=AI</li><li>Access Token (认证令牌): <code>access_token</code>=</li></ul></li><li><p>响应状态码</p><ul><li>应该使用标准 HTTP 状态码</li></ul></li><li><p>响应头</p><ul><li><code>Content-Type</code></li><li><code>ETag</code></li><li>&mldr;</li></ul></li><li><p>响应体 (JSON 格式)</p></li><li><p>错误处理</p></li></ul><h2 id=示例>示例</h2><h3 id=资源模型-gmail>资源模型 (Gmail)</h3><ul><li>API 路径: <code>gmail.googleapis.com</code></li><li>用户资源集合: <code>users/*</code>. 每个用户资源集合含有下列子资源或子资源集合.<ul><li>消息资源集合: <code>users/*/messages/*</code>.</li><li>会话资源集合: <code>users/*/threads/*</code>.</li><li>标签资源集合: <code>users/*/labels/*</code>.</li><li>历史信息资源集合: <code>users/*/history/*</code>.</li><li>用户资料资源: <code>users/*/profile</code>.</li><li>用户设置资源: <code>users/*/settings</code>.</li></ul></li></ul><h3 id=相应>相应</h3><h4 id=成功响应>成功响应</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;data&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;lwj2lk3jlk2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Hello World&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;pagination&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;offset&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;limit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;total&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3464</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#204a87;font-weight:700>&#34;data&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#a40000>//...</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h4 id=错误响应>错误响应</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;error&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;code&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ERROR_CODE&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#a40000>//</span> <span style=color:#204a87;font-weight:700>&#34;INVALID-REQUEST&#34;</span>
    <span style=color:#4e9a06>&#34;message&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;longer error description&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;link&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;An documentation url for error details and solutions&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=常用状态码>常用状态码</h2><table><thead><tr><th>状态码</th><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>200</td><td><code>OK</code></td><td>请求成功。一般用于 GET 与 POST 请求</td></tr><tr><td>201</td><td><code>Created</code></td><td>已创建。成功请求并创建了新的资源</td></tr><tr><td>204</td><td><code>No Content</code></td><td>无内容。服务器成功处理，但未返回内容</td></tr><tr><td>301</td><td><code>Moved Permanently</code></td><td>请求的资源已被永久的移动到新 URI</td></tr><tr><td>302</td><td><code>Found</code></td><td>请求的资源被临时的移动到新 URI</td></tr><tr><td>400</td><td><code>Bad Request</code></td><td>客户端请求的语法错误，服务器无法理解</td></tr><tr><td>401</td><td><code>Unauthorized</code></td><td>请求要求用户的身份认证</td></tr><tr><td>403</td><td><code>Forbidden</code></td><td>服务器理解请求客户端的请求，但是拒绝执行此请求</td></tr><tr><td>404</td><td><code>Not Found</code></td><td>服务器无法根据客户端的请求找到资源</td></tr><tr><td>405</td><td><code>Method Not Allowed</code></td><td>客户端请求中的方法被禁止</td></tr><tr><td>408</td><td><code>Request Timeout</code></td><td>服务器等待客户端发送的请求时间过长，超时</td></tr><tr><td>409</td><td><code>Conflict</code></td><td>服务器处理请求时发生了冲突</td></tr><tr><td>411</td><td><code>Length Required</code></td><td>服务器无法处理客户端发送的不带 Content-Length 的请求信息</td></tr><tr><td>414</td><td><code>URI Too Long</code></td><td>请求的 URI 过长（URI 通常为网址），服务器无法处理</td></tr><tr><td>415</td><td><code>Unsupported Media Type</code></td><td>服务器无法处理请求附带的媒体格式</td></tr><tr><td>429</td><td><code>Too Many Requests</code></td><td>用户发送了过多的请求(请求频率限制)</td></tr><tr><td>500</td><td><code>Internal Server Error</code></td><td>服务器内部错误，无法完成请求</td></tr><tr><td>502</td><td><code>Bad Gateway</code></td><td>服务器从远端服务器接收到了一个无效的请求</td></tr><tr><td>503</td><td><code>Service Unavailable</code></td><td>服务器暂时的无法处理客户端的请求</td></tr><tr><td>504</td><td><code>Gateway Timeout</code></td><td>充当网关或代理的服务器，未及时从远端服务器获取请求</td></tr></tbody></table><h2 id=其他考虑事项>其他考虑事项</h2><ul><li>安全<ul><li>HTTPS: 必须全程使用 HTTPS</li><li>访问控制<ul><li>认证</li><li>JWT</li><li>API Key</li></ul></li><li>用户权限</li><li>输入验证<ul><li>长度、范围、格式、类型</li><li>大小限制</li></ul></li><li>跨域访问<ul><li>公开 API 必须包含跨域访问头并允许任意来源 <code>*</code></li></ul></li></ul></li><li>分页</li><li>监控<ul><li><code>/heath</code>: <code>200 OK</code> or <code>503 Service Unavailable</code>, 用于负载均衡及服务发现</li><li><code>/version</code>: 版本</li><li><code>/status</code>: <code>200 OK</code> or <code>500 Internal Server Error</code></li><li><code>/metrics</code>: 持续运行时间(秒), 平均响应时间，500 错误个数</li></ul></li></ul></div></div></div></div></div><section class="section has-background-light"><div class=container><div class=columns><div class="column has-text-centered"><p class="subtitle is-size-6-mobile">关注微信公众号「 <span class="text has-text-info">TONY的BLOG</span> 」<br>即时获取最新动态</p><p class="image is-96x96 has-image-centered"><img src=/images/wechat-qr-code.jpg></p></div></div></section><section class=section><div class=container><div class=columns><div class="column is-8 is-offset-2 has-text-centered"><article><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"tonyxu-io"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></div></div></section></main><footer><footer class=footer><div class=container><div class="content has-text-centered"><p class="text is-uppercase has-text-grey">© 2018-2021 Tony Xu 徐毅涵</p><p class=text><a href=/tonyxu.io/zh/about class="has-text-grey footer-link">关于</a>
<a href=/tonyxu.io/zh/friends class="has-text-grey footer-link">友情链接</a>
<a href=/tonyxu.io/zh/analytics class="has-text-grey footer-link">分析</a>
<a href=/index.xml class="has-text-grey footer-link">RSS</a></p></div></div></footer></footer></body></html>